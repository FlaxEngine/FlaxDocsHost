<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Shader Code in Materials | Flax Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Shader Code in Materials | Flax Documentation ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    <meta property="docfx:rel" content="../../../">
    <meta property="docfx:newtab" content="true">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@flaxengine">
    <meta name="og:title" content="Shader Code in Materials | Flax Documentation ">
    <meta property="og:image" content="https://docs.flaxengine.com/media/social-image.jpg">
  
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-88357703-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-88357703-2');
    </script>
  </head>	  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="https://www.flaxengine.com">
        		<div style="text-align:center; line-height:45px">
        	    <img id="logo" height="40" width="40" src="../../../logo.png" alt="">
        		</div>
        	  </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="shader-code-in-materials">Shader Code in Materials</h1>

<p>This page shows how to use HLSL shader code inside <a href="basics/index.html">Materials</a> and <a href="material-functions.html">Material Functions</a>.</p>
<p>Flax uses <strong>HLSL</strong> as a shading language as it&#39;s very popular in the industry and supports all major graphics rendering features. Additionally, engine will automatically compile HLSL shaders into target platform such as Vulkan or PS4 with full runtime support.
To learn about HLSL syntax see <a href="https://docs.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-reference">Reference for HLSL</a> and <a href="https://docs.microsoft.com/en-us/windows/win32/direct3dhlsl/dx-graphics-hlsl-pguide">Programming guide for HLSL</a>.</p>
<p>For better understanding how shaders are handled by the engine see dedicated documentation section <a href="../shaders/index.html">here</a>.</p>
<h2 id="custom-code">Custom Code</h2>
<p><img src="media/custom-code-node.png" alt="Custom Code node"></p>
<p>Custom Code node allows to write raw HLSL code which operates on fixed inputs and outputs. It&#39;s rather simple solution for small code chunks that can implement dynamic branching, dynamic loops or invoke shader functions from external sources (eg. shader library files).</p>
<h2 id="global-custom-code">Global Custom Code</h2>
<p><img src="media/custom-global-code-node.png" alt="Global Custom Code node"></p>
<p>Global Custom Code node is more robust as it inlines code at a specific location in the material template. For example, it can inject global preprocessor macros, inject custom header file includes, add shader resources binding, or declare global functions.</p>
<p>Use <strong>Location</strong> dropdown to properly define place of code injection. You can see it in generated shader source code (click on toolbar button).</p>
<p>This node provides an easy way to include custom <code>.hlsl</code> files from the project source code folder which can implement certain functionalities in text-based format. To do so, create a shader file in <code>_project_/Source/Shaders</code>. Then you can include it via: <code>#include &quot;./_project_name__/MyFile.hlsl&quot;</code>. Where <code>_project_name__</code> is name of the project from the <code>_project_.flaxproj</code> file. This allows to include shaders from plugin projects. See <a href="../shaders/index.html">this page</a> to learn more (esp. <code>Including shader files</code> and <code>Using shaders</code> sections).</p>
<h2 id="custom-shader-code-file">Custom Shader Code File</h2>
<p>Custom Code node inside Editor has limitations and doesn&#39;t provide a full IDE editing experience, thus it&#39;s possible to easily use a standard <code>.hlsl</code> shader file and include it inside materials or material functions. Shader compiler will automatically detect any changes to the source file and reload any materials using it to provide a live editing experience inside the Editor.</p>
<p>Use <code>#include &quot;./_project_name__/MyFunction.hlsl&quot;</code> inside the <strong>Global Custom Code</strong> node which will inject the file <code>_project_/Source/Shaders/MyFunction.hlsl</code> into the shader compilation. </p>
<div class="TIP"><h5>Tip</h5><p><code>_project_name__</code> is name of the project from the <code>_project_.flaxproj</code> file.</p>
</div>
<p>Example contents of <code>_project_/Source/Shaders/MyFunction.hlsl</code> file:</p>
<pre><code class="lang-hlsl">#include &quot;./Flax/Noise.hlsl&quot;

float2 GetRandomValue(float2 uv)
{
    return rand2dTo2d(uv);
}
</code></pre><p>Example usage, where shader file is included within Custom Global Code node, then function declared in that shader file is used within Custom Code node. Notice that the custom shader file can include other files and declare other resources or functions.</p>
<p><img src="media/custom-global-shader-file.png" alt="Custom Global Shader File"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/FlaxEngine/FlaxDocs/blob/476356d091d58fb1a2b7039df11183a47799691d/manual/graphics/materials/shader-code-in-material.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright © 2012-2024 Wojciech Figat
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
